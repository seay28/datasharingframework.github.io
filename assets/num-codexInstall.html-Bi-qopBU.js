import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as r,a as s,o as t}from"./app-CJIENTLq.js";const a={};function n(o,e){return t(),r("div",null,e[0]||(e[0]=[s(`<p>This setup guide uses pre-build docker images for DSF Version 0.9.3. This guide is not suitable for HiGHmed organizations.<br> If you are a member of HiGHmed, see <a href="HiGHmed-DSF-0.9.3-Deployment">HiGHmed Install</a>.</p><h2 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites"><span>Prerequisites</span></a></h2><h3 id="virtual-machines" tabindex="-1"><a class="header-anchor" href="#virtual-machines"><span>Virtual Machines</span></a></h3><ul><li>DSF FHIR VM: min. 4 GB RAM, 4 vCPU, 20 GB HDD</li><li>DSF BPE VM: min. 4 GB RAM, 4 vCPU, 20 GB HDD</li></ul><h3 id="docker-docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-docker-compose"><span>Docker / Docker-Compose</span></a></h3><p>Both VMs need latest docker and docker-compose. For the latest install guide see <a href="https://docs.docker.com/engine/install" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install</a> and <a href="https://docs.docker.com/compose/install" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install</a></p><p>docker:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo apt-get update</span></span>
<span class="line"><span>sudo apt-get install apt-transport-https ca-certificates curl gnupg lsb-release</span></span>
<span class="line"><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span></span>
<span class="line"><span>echo &quot;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span></span>
<span class="line"><span>sudo apt-get update</span></span>
<span class="line"><span>sudo apt-get install docker-ce docker-ce-cli containerd.io</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>docker-compose (warning: <a href="https://github.com/docker/compose/releases/tag/v2.17.3" target="_blank" rel="noopener noreferrer">2.17.3</a> might not be <a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener noreferrer">latest</a>):</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.17.3/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span></span>
<span class="line"><span>sudo chmod +x /usr/local/bin/docker-compose</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="client-server-certificates" tabindex="-1"><a class="header-anchor" href="#client-server-certificates"><span>Client/Server Certificates</span></a></h3><p>Two Certificates from the DFN-PKI Global G2 (via DFN e.V.), GÃ‰ANT TCS (via DFN e.V.) or D-Trust (via TMF e.V.) are needed, more infos see <a href="../generalinformation/authentication">Authentication</a></p><ul><li>Certificate A: Server Certificate (DFN PKI Profile: &#39;Web Server&#39;, Common-Name: Your external DSF FHIR Servers FQDN)</li><li>Certificate B: Client Certificate (DFN PKI Profile: &#39;802.1X Client&#39;, Common-Name: Your DSF BPE Servers FQDN)</li></ul><h3 id="network-setup-network-access" tabindex="-1"><a class="header-anchor" href="#network-setup-network-access"><span>Network setup / Network access</span></a></h3><p>For additional information on the network setup see <a href="../generalinformation/networkSetup">Network-and-Architecture</a>.</p><ul><li>The DSF FHIR server needs to be accessible via the internet and able to access the internet without TLS interception.</li><li>The BPE FHIR server should only be accessible by the internal network and able to access your DSF FHIR server via its external FQDN and the internet without TLS interception.</li></ul><p>Here is a quick overview of the expected network setup. Connections to the fTTP, the terminology server and <a href="http://simplifier.net" target="_blank" rel="noopener noreferrer">simplifier.net</a> for validating GECCO FHIR resources as well as the local GECCO FHIR server are not listed:</p><table><thead><tr><th>Source</th><th>Target</th><th>Port</th><th>Protocol</th></tr></thead><tbody><tr><td>DSF BPE (local)</td><td>DSF FHIR (local)</td><td>443</td><td>https, wss</td></tr><tr><td>DSF BPE (local)</td><td>DSF FHIR (GECCO Transfer Hub)</td><td>443</td><td>https</td></tr><tr><td>DSF FHIR (local)</td><td>DSF FHIR (GECCO Transfer Hub)</td><td>443</td><td>https (HTTP HEAD only)</td></tr><tr><td>DSF BPE (GECCO Transfer Hub)</td><td>DSF FHIR (local)</td><td>443</td><td>https</td></tr><tr><td>DSF FHIR (GECCO Transfer Hub)</td><td>DSF FHIR (local)</td><td>443</td><td>https (HTTP HEAD only)</td></tr></tbody></table><h3 id="on-boarding-excel-spreadsheet" tabindex="-1"><a class="header-anchor" href="#on-boarding-excel-spreadsheet"><span>On-Boarding Excel Spreadsheet</span></a></h3><p>You are required to fill out the on-boarding Excel spreadsheet, provided with the NUM-CODEX hackathon invite, and send it to the GECCO Transfer Hub. If the GECCO Transfer Hub already received and validated your On-Boarding Excel spreadsheet and you do not have to change any information, you can skip this step.</p><h2 id="setup" tabindex="-1"><a class="header-anchor" href="#setup"><span>Setup</span></a></h2><h3 id="prepare-certificates" tabindex="-1"><a class="header-anchor" href="#prepare-certificates"><span>Prepare Certificates</span></a></h3><ol><li><p>Server Certificate (certificate A)<br><em>This certificate will be used as the DSF FHIR servers server certificate (ssl_certificate_file.pem, ssl_certificate_key_file.pem)</em></p><ul><li>Store PEM encoded certificate as <code>ssl_certificate_file.pem</code></li><li>Store unencrypted, PEM encoded private-key as <code>ssl_certificate_key_file.pem</code></li></ul></li><li><p>Client Certificate (certificate B)<br><em>This certificate will be used as the DSF BPE servers client certificate (client_certificate.pem, client_certificate_private_key.pem) as well as the DSF FHIR servers client certificate (client_certificate.pem, client_certificate_private_key.pem)</em></p><ul><li>Store PEM encoded certificate as <code>client_certificate.pem</code></li><li>Store encrypted or not encrypted, PEM encoded private-key as <code>client_certificate_private_key.pem</code></li></ul></li></ol><h3 id="dsf-fhir-server" tabindex="-1"><a class="header-anchor" href="#dsf-fhir-server"><span>DSF FHIR Server</span></a></h3><ol><li><p>Add Group/User<br> Add group and user used by the DSF FHIR java application. Ubuntu compatible commands below:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo addgroup --gid 2101 fhir</span></span>
<span class="line"><span>sudo adduser --system --no-create-home --uid 2101 --gid 2101 fhir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Download and Extract Config Files<br> Download prepared DSF FHIR server config files and folder structure from</p><ul><li><strong>Test NUM-CODEX</strong> instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_fhir_0_9_3.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_fhir_0_9_3.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_fhir_0_9_3.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_codex_test_fhir_0_9_3.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>Production NUM-CODEX</strong> instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_fhir_0_9_3.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_fhir_0_9_3.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_fhir_0_9_3.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_codex_prod_fhir_0_9_3.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><em>The <code>tar</code> command will unpack the config files at <code>/opt/fhir</code> assuming you changed into the <code>/opt</code> directory.</em></p></li><li><p>Verify that the <code>fhir</code> system user or group can write into the following folder</p><ul><li><code>/opt/fhir/log</code></li></ul></li><li><p>Add certificates and keys</p><ul><li>Add the server certificate (certificate A) and the corresponding private-key to <strong>/opt/fhir/secrets/</strong><ul><li>ssl_certificate_file.pem (chmod: 440, chown: fhir:docker)</li><li>ssl_certificate_key_file.pem (chmod: 440, chown: fhir:docker)</li></ul></li><li>Add the client certificate (certificate B) and the corresponding private-key to <strong>/opt/fhir/secrets/</strong><ul><li>client_certificate.pem (chmod: 440, chown: fhir:docker)</li><li>client_certificate_private_key.pem (chmod: 440, chown: fhir:docker)</li></ul></li><li>If the private key is encrypted, add a password file with the password as the only content to <strong>/opt/fhir/secrets/</strong><ul><li>client_certificate_private_key.pem.password</li></ul></li><li>If the private key is not encrypted, remove the corresponding docker secret lines from the <code>docker-compose.yml</code> file<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>L39:      - app_client_certificate_private_key.pem.password</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>L56:      ORG_HIGHMED_DSF_FHIR_CLIENT_CERTIFICATE_PRIVATE_KEY_PASSWORD_FILE: /run/secrets/app_client_certificate_private_key.pem.password</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>L137:  app_client_certificate_private_key.pem.password:</span></span>
<span class="line"><span>L138:    file: ./secrets/client_certificate_private_key.pem.password</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>Uncomment one of the certificate chain entries in the docker-compose file base on the certificate authority that signed your DSF FHIR server certificate (certificate A). For example use the following two lines if the server certificate is signed by <code>DFN-Verein Global Issuing CA</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>L102:  ssl_certificate_chain_file.pem:</span></span>
<span class="line"><span>L103:    file: ./secrets/ssl_certificate_chain_file_DFN-Verein.pem</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Modify database passwords</p><ul><li><strong>/opt/fhir/secrets/db_liquibase.password</strong><ul><li>Generate a random password (min. 32 characters recommended) and replace the content of the file.</li></ul></li><li><strong>/opt/fhir/secrets/db_user.password</strong><ul><li>Generate a random password (min. 16 characters recommended) and replace the content of the file.</li></ul></li><li><strong>/opt/fhir/secrets/db_user_permanent_delete.password</strong><ul><li>Generate a random password (min. 16 characters recommended) and replace the content of the file.</li></ul></li></ul></li><li><p>Modify the docker-compose.yml file and set environment variables to the appropriate values</p><ul><li><strong>services -&gt; proxy -&gt; environment:</strong><ul><li><strong>HTTPS_SERVER_NAME_PORT</strong>: <strong>TODO_DSF_FRIR_SERVER_EXTERNAL_FQDN:443</strong><br> Set your FHIR servers external FQDN, e.g. <code>foo.bar.de</code> -&gt; <code>foo.bar.de:443</code></li><li>For additional environment variables, see <a href="configFhirReverseProxy">DSF 0.9.3 FHIR Reverse Proxy configuration parameters</a></li></ul></li><li><strong>services -&gt; app -&gt; environment:</strong><ul><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_FQDN</strong>: <em>TODO_DSF_FRIR_SERVER_EXTERNAL_FQDN</em><br> Set your FHIR servers external FQDN, e.g. <code>foo.bar.de</code></li><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_BASE_URL</strong>: https://<em>TODO_DSF_FRIR_SERVER_EXTERNAL_FQDN</em>/fhir<br> Set your FHIR servers external FQDN, e.g. <code>foo.bar.de</code> -&gt; <code>https://foo.bar.de/fhir</code></li><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_ORGANIZATION_IDENTIFIER_VALUE</strong>: <em>TODO_ORGANIZATION_IDENTIFIER</em><br> Set your Organizations DSF identifier, aka the shortest FQDN that resolves to the main homepage of the organization, e.g. <a href="http://hs-heilbronn.de" target="_blank" rel="noopener noreferrer">hs-heilbronn.de</a></li><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_ORGANIZATION_NAME</strong>: <em>TODO_ORGANIZATION_NAME</em><br> Set your Organizations official name, e.g. Hochschule Heilbronn</li><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_ORGANIZATION_THUMBPRINT</strong>: <em>TODO_CLIENT_CERTIFICATE_THUMBPRINT</em><br> Set the SHA-512 Hash (lowercase hex) of your client certificate (certificate B)<br> Use <code>certtool --fingerprint --hash=sha512 --infile=client_certificate.pem</code> to generate the hash.</li><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_USER_THUMBPRINTS</strong>: <em>TODO_CLIENT_CERTIFICATE_THUMBPRINTS</em><br> Set the SHA-512 Hash (lowercase hex) of your client certificate (certificate B)<br> This parameter is a comma separated list e.g. <code>ab12...37ff,f3a2...bb22</code>. You can add additional client certificate thumbprints for example the thumbprint of your (the admins) personal DFN PKI S/MIME certificate, to access the DSF FHIR servers REST interface.</li><li><strong>ORG_HIGHMED_DSF_FHIR_SERVER_USER_THUMBPRINTS_PERMANENT_DELETE</strong>: <em>TODO_CLIENT_CERTIFICATE_THUMBPRINTS</em><br> Set the SHA-512 Hash (lowercase hex) of your client certificate (certificate B)<br> This parameter is a comma separated list e.g. <code>ab12...37ff,f3a2...bb22</code>. Usually it is not necessary to add additional thumbprints other than your client certificate (certificate B) here. When a client uses a certificate with a thumbprint listed here, the client is allowed to permanently delete FHIR resources.</li><li>For additional environment variables, see <a href="configFhir">DSF 0.9.3 FHIR Server configuration parameters</a></li></ul></li></ul></li><li><p>Start the DSF FHIR Server<br> Start using: <code>docker-compose up -d &amp;&amp; docker-compose logs -f</code> (Ctrl-C will close log, but not stop container)</p></li></ol><h3 id="dsf-bpe-server" tabindex="-1"><a class="header-anchor" href="#dsf-bpe-server"><span>DSF BPE Server</span></a></h3><ol><li><p>Add Group/User<br> Add group and user used by the DSF BPE java application. Ubuntu compatible commands below:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>sudo addgroup --gid 2202 bpe</span></span>
<span class="line"><span>sudo adduser --system --no-create-home --uid 2202 --gid 2202 bpe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Download and Extract Config Files<br> Download prepared DSF BPE server config files and folder structure from</p><ul><li><strong>Test NUM-CODEX</strong> instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_bpe_0_9_3.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_bpe_0_9_3.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_bpe_0_9_3.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_codex_test_bpe_0_9_3.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>Production NUM-CODEX</strong> instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_bpe_0_9_3.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_bpe_0_9_3.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_bpe_0_9_3.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_codex_prod_bpe_0_9_3.tar.gz</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><em>The <code>tar</code> command will unpack the config files at <code>/opt/bpe</code> assuming you changed into the <code>/opt</code> directory.</em></p></li><li><p>Verify that the <code>bpe</code> system user or group can write into the following folders</p><ul><li><code>/opt/bpe/log</code></li></ul></li><li><p>Add certificates and keys</p><ul><li>Add the client certificate (certificate B) and the corresponding private-key to <strong>/opt/bpe/secrets/</strong><ul><li>client_certificate.pem (chmod: 440 chown: bpe:docker)</li><li>client_certificate_private_key.pem (chmod: 440 chown: bpe:docker)</li></ul></li><li>If the private key is encrypted, add a password file with the password as the only content to <strong>/opt/bpe/secrets/</strong><ul><li>client_certificate_private_key.pem.password</li></ul></li><li>If the private key is not encrypted, remove the corresponding docker secret lines from the <code>docker-compose.yml</code> file<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>L13:      - app_client_certificate_private_key.pem.password</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>L38:      ORG_HIGHMED_DSF_BPE_FHIR_CLIENT_CERTIFICATE_PRIVATE_KEY_PASSWORD_FILE: /run/secrets/app_client_certificate_private_key.pem.password</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>L92:  app_client_certificate_private_key.pem.password:</span></span>
<span class="line"><span>L93:    file: ./secrets/client_certificate_private_key.pem.password</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Add the CRR public-key used for asymmetrically encrypting the GECCO FHIR Bundles to <strong>/opt/bpe/secrets/</strong><ul><li>crr_public_key.pem (chmod: 440 chown: bpe:docker)</li><li>You can download the 4096 Bit RSA PEM encoded public-key for <ul><li>a <strong>Test</strong> instance from:<br><a href="https://keys.num-codex.de/crr_public-key-pre-prod.pem" target="_blank" rel="noopener noreferrer">https://keys.num-codex.de/crr_public-key-pre-prod.pem</a></li><li>a <strong>Production</strong> instance from:<br><a href="https://keys.num-codex.de/crr_public-key-prod.pem" target="_blank" rel="noopener noreferrer">https://keys.num-codex.de/crr_public-key-prod.pem</a></li></ul></li></ul></li></ul></li><li><p>Modify database passwords</p><ul><li><strong>/opt/bpe/secrets/db_liquibase.password</strong><ul><li>Generate a random password (min. 32 characters recommended) and replace the content of the file.</li></ul></li><li><strong>/opt/bpe/secrets/db_user.password</strong><ul><li>Generate a random password (min. 16 characters recommended) and replace the content of the file.</li></ul></li><li><strong>/opt/bpe/secrets/db_user_camunda.password</strong><ul><li>Generate a random password (min. 16 characters recommended) and replace the content of the file.</li></ul></li></ul></li><li><p>Modify the docker-compose.yml file and set environment variables to the appropriate values</p><ul><li><strong>services -&gt; app -&gt; environment:</strong><ul><li><strong>ORG_HIGHMED_DSF_BPE_FHIR_SERVER_ORGANIZATION_IDENTIFIER_VALUE</strong>: <em>TODO_ORGANIZATION_IDENTIFIER</em><br> Set your Organizations DSF identifier, aka the shortest FQDN that resolves the main homepage of the organization, e.g. <a href="http://hs-heilbronn.de" target="_blank" rel="noopener noreferrer">hs-heilbronn.de</a></li><li><strong>ORG_HIGHMED_DSF_BPE_FHIR_SERVER_BASE_URL</strong>: https://<strong>TODO_DSF_FRIR_SERVER_FQDN</strong>/fhir<br> Set your FHIR servers external FQDN, e.g. <code>foo.bar.de</code> -&gt; <code>https://foo.bar.de/fhir</code></li><li>For additional environment variables, see <a href="configBpe">DSF 0.9.3 BPE Server configuration parameters</a></li></ul></li></ul></li><li><p>Start the DSF BPE Server (without process plugins)<br> Start using: <code>docker-compose up -d &amp;&amp; docker-compose logs -f</code> (Ctrl-C will close log, but not stop container)</p></li><li><p>Verify DSF BPE Startup</p><ul><li>Check that the BPE was able to download new Task resources from the DSF FHIR server during startup.</li><li>Check that the BPE was able to download a Subscription resource from the DSF FHIR server during startup.</li><li>Check that the BPE was able to connect to the websocket endpoint of the DSF FHIR server during startup.</li></ul><p>If you need to debug the TLS connection to your DSF FHIR server use for example:<br><code>docker run -it --rm alpine/openssl s_client your-fhir-server.fqdn:443</code><br> The command above should print the server certificate of your DSF FHIR server (certificate A) and end with a message like <code>[...]tlsv13 alert certificate required[...]</code></p></li><li><p>Stop the DSF BPE Server</p><ul><li>Hit Ctrl-C to close log</li><li>Stop using: <code>docker-compose stop</code></li></ul></li><li><p>Add the following DSF BPE process plugins, for instructions on how to configure the plugin, see release notes.</p><ul><li><strong>num-codex / codex-processes-ap1</strong> version 0.7.0 or later:<br><a href="https://github.com/num-codex/codex-processes-ap1/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">https://github.com/num-codex/codex-processes-ap1/releases/tag/v0.7.0</a><br> See <a href="https://github.com/num-codex/codex-processes-ap1/wiki/Process-Deployment-and-Configuration-v0.7.0" target="_blank" rel="noopener noreferrer">NUM-CODEX: Process Deployment and Configuration</a> on how to deploy and configure the process plugin.</li><li><strong>highmed / highmed-processes / ping</strong> version 0.7.0 or later:<br><a href="https://github.com/highmed/highmed-processes/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-processes/releases/tag/v0.7.0</a><br> See <a href="https://github.com/highmed/highmed-processes/wiki/Process-Ping-Deployment-v0.7.0" target="_blank" rel="noopener noreferrer">HiGHmed: Process Ping Deployment</a> on how to deploy and configure the process plugin.</li></ul><p><em>Notice: Jar-files within the folders <code>/opt/bpe/process</code> and <code>/opt/bpe/plugin</code> need to be readable by the linxux <code>bpe</code> user -&gt; <code>chown root:bpe</code>, <code>chmod 440</code></em></p></li><li><p>Start the DSF BPE Server (with process plugins)<br> Start using: <code>docker-compose up -d &amp;&amp; docker-compose logs -f</code> (Ctrl-C will close log, but not stop container)</p></li></ol>`,27)]))}const c=i(a,[["render",n],["__file","num-codexInstall.html.vue"]]),p=JSON.parse('{"path":"/oldstable/releases/num-codexInstall.html","title":"","lang":"en-US","frontmatter":{"gitInclude":[]},"headers":[{"level":2,"title":"Prerequisites","slug":"prerequisites","link":"#prerequisites","children":[{"level":3,"title":"Virtual Machines","slug":"virtual-machines","link":"#virtual-machines","children":[]},{"level":3,"title":"Docker / Docker-Compose","slug":"docker-docker-compose","link":"#docker-docker-compose","children":[]},{"level":3,"title":"Client/Server Certificates","slug":"client-server-certificates","link":"#client-server-certificates","children":[]},{"level":3,"title":"Network setup / Network access","slug":"network-setup-network-access","link":"#network-setup-network-access","children":[]},{"level":3,"title":"On-Boarding Excel Spreadsheet","slug":"on-boarding-excel-spreadsheet","link":"#on-boarding-excel-spreadsheet","children":[]}]},{"level":2,"title":"Setup","slug":"setup","link":"#setup","children":[{"level":3,"title":"Prepare Certificates","slug":"prepare-certificates","link":"#prepare-certificates","children":[]},{"level":3,"title":"DSF FHIR Server","slug":"dsf-fhir-server","link":"#dsf-fhir-server","children":[]},{"level":3,"title":"DSF BPE Server","slug":"dsf-bpe-server","link":"#dsf-bpe-server","children":[]}]}],"readingTime":{"minutes":6.12,"words":1837},"filePathRelative":"oldstable/releases/num-codexInstall.md","excerpt":"<p>This setup guide uses pre-build docker images for DSF Version 0.9.3. This guide is not suitable for HiGHmed organizations.<br>\\nIf you are a member of HiGHmed, see <a href=\\"HiGHmed-DSF-0.9.3-Deployment\\">HiGHmed Install</a>.</p>\\n<h2>Prerequisites</h2>\\n<h3>Virtual Machines</h3>\\n<ul>\\n<li>DSF FHIR VM: min. 4 GB RAM, 4 vCPU, 20 GB HDD</li>\\n<li>DSF BPE VM: min. 4 GB RAM, 4 vCPU, 20 GB HDD</li>\\n</ul>"}');export{c as comp,p as data};
