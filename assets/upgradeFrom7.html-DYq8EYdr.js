import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a,o as n}from"./app-CJIENTLq.js";const r={};function l(t,e){return n(),i("div",null,e[0]||(e[0]=[a(`<p>Upgrading the DSF from 0.7.0 to 0.9.0 involves replacing a config file, modifying the docker-compose.yml files, replacing the process plugins and recreating the containers.</p><p><strong>If you are upgrading from 0.6.0 please see the <a href="https://github.com/highmed/highmed-dsf/wiki/DSF-Upgrade-From-0.6.0-to-0.7.0" target="_blank" rel="noopener noreferrer">Upgrade from 0.6.0 to 0.7.0 guide</a> first.</strong></p><h2 id="modify-dsf-fhir-server-setup" tabindex="-1"><a class="header-anchor" href="#modify-dsf-fhir-server-setup"><span>Modify DSF FHIR Server Setup</span></a></h2><ol><li><p>Preparation / Backup</p><ul><li>We recommend to create a backup of the <code>/opt/fhir</code> directory before proceeding with the upgrade.<br> For example using: <code>sudo cp -rp /opt/fhir /opt/fhir_backup_pre_0.9.0_upgrade</code></li></ul></li><li><p>Modify the DSF FHIR docker-compose.yml file, replace 0.7.0 with 0.9.0</p><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" data-title="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -1,7 +1,7 @@</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> version: &#39;3.8&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   proxy:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/highmed/fhir_proxy:0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/highmed/fhir_proxy:0.9.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     ports:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - 127.0.0.1:80:80</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -27,7 +27,7 @@ services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - app</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   app:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/highmed/fhir:0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/highmed/fhir:0.9.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     healthcheck:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       test: [&quot;CMD&quot;, &quot;java&quot;, &quot;-cp&quot;, &quot;dsf_fhir.jar&quot;, &quot;org.highmed.dsf.fhir.StatusClient&quot;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Download prepared DSF FHIR server config files and extract/replace the external FHIR bundle</p><ul><li><strong>Test NUM-CODEX</strong> (non HiGHmed) instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_fhir_0_9_0.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_fhir_0_9_0.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_test_fhir_0_9_0.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_codex_test_fhir_0_9_0.tar.gz fhir/conf/bundle.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>Test HiGHmed</strong> instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_highmed_test_fhir_0_9_0.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_highmed_test_fhir_0_9_0.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_highmed_test_fhir_0_9_0.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_highmed_test_fhir_0_9_0.tar.gz fhir/conf/bundle.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>Production NUM-CODEX</strong> (non HiGHmed) instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_fhir_0_9_0.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_fhir_0_9_0.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_codex_prod_fhir_0_9_0.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_codex_prod_fhir_0_9_0.tar.gz fhir/conf/bundle.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>Production HiGHmed</strong> instance:<br><a href="https://github.com/highmed/highmed-dsf/wiki/resources/dsf_highmed_prod_fhir_0_9_0.tar.gz" target="_blank" rel="noopener noreferrer">https://github.com/highmed/highmed-dsf/wiki/resources/dsf_highmed_prod_fhir_0_9_0.tar.gz</a><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cd /opt</span></span>
<span class="line"><span>wget https://github.com/highmed/highmed-dsf/wiki/resources/dsf_highmed_prod_fhir_0_9_0.tar.gz</span></span>
<span class="line"><span>sudo tar --same-owner -zxvf dsf_highmed_prod_fhir_0_9_0.tar.gz fhir/conf/bundle.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>The command will update the external FHIR bundle at <code>/opt/fhir/conf/bundle.xml</code></p><p>The output of the tar command should be</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>fhir/conf/bundle.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Upgrade the DSF FHIR containers<br> From <code>/opt/fhir</code> execute</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up -d &amp;&amp; docker-compose logs -f</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="modify-dsf-bpe-server-setup" tabindex="-1"><a class="header-anchor" href="#modify-dsf-bpe-server-setup"><span>Modify DSF BPE Server Setup</span></a></h2><ol><li><p>Preparation / Backup</p><ul><li>We recommend to create a backup of the <code>/opt/bpe</code> directory before proceeding with the upgrade.<br> For example using: <code>sudo cp -rp /opt/bpe /opt/bpe_backup_pre_0.9.0_upgrade</code></li></ul></li><li><p>Modify the DSF BPE docker-compose.yml file</p><ul><li><p><strong>NUM-CODEX</strong> (non HiGHmed) instance:<br> Change the bpe container version from 0.7.0 to 0.9.0, update the process exclude config and remove a bind mount</p><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" data-title="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -1,7 +1,7 @@</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> version: &#39;3.8&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   app:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/highmed/bpe:0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/highmed/bpe:0.9.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     healthcheck:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       test: [&quot;CMD&quot;, &quot;java&quot;, &quot;-cp&quot;, &quot;dsf_bpe.jar&quot;, &quot;org.highmed.dsf.bpe.StatusClient&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -29,9 +29,6 @@ services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - type: bind</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         source: ./log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         target: /opt/bpe/log</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-      - type: bind</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        source: ./last_event</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        target: /opt/bpe/last_event</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - type: bind</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         source: ./cache</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         target: /opt/bpe/cache</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -48,8 +45,8 @@ services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       ORG_HIGHMED_DSF_BPE_FHIR_SERVER_ORGANIZATION_IDENTIFIER_VALUE: TODO_ORGANIZATION_IDENTIFIER</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       ORG_HIGHMED_DSF_BPE_FHIR_SERVER_BASE_URL: https://TODO_DSF_FRIR_SERVER_FQDN/fhir</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       ORG_HIGHMED_DSF_BPE_PROCESS_EXCLUDED: |</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        wwwnetzwerk-universitaetsmedizinde_dataTranslate/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        wwwnetzwerk-universitaetsmedizinde_dataReceive/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        wwwnetzwerk-universitaetsmedizinde_dataTranslate/0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        wwwnetzwerk-universitaetsmedizinde_dataReceive/0.7.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       #TODO modify ORG_HIGHMED_DSF_BPE_PROCESS_EXCLUDED for later process versions</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       #TODO add process specific environment variables, see process documentation</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>HiGHmed</strong> instance:<br> Change the bpe container version from 0.7.0 to 0.9.0, update the process exclude config, and remove a bind mount</p><div class="language-diff line-numbers-mode" data-highlighter="shiki" data-ext="diff" data-title="diff" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -1,7 +1,7 @@</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> version: &#39;3.8&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">   app:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-    image: ghcr.io/highmed/bpe:0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+    image: ghcr.io/highmed/bpe:0.9.0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     restart: on-failure</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">     healthcheck:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       test: [&quot;CMD&quot;, &quot;java&quot;, &quot;-cp&quot;, &quot;dsf_bpe.jar&quot;, &quot;org.highmed.dsf.bpe.StatusClient&quot;]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -29,9 +29,6 @@ services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - type: bind</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         source: ./log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         target: /opt/bpe/log</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-      - type: bind</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        source: ./last_event</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        target: /opt/bpe/last_event</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       - type: bind</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         source: ./psn</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         target: /opt/bpe/psn</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@@ -51,11 +48,11 @@ services:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       ORG_HIGHMED_DSF_BPE_FHIR_SERVER_ORGANIZATION_IDENTIFIER_VALUE: TODO_ORGANIZATION_IDENTIFIER</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       ORG_HIGHMED_DSF_BPE_FHIR_SERVER_BASE_URL: https://TODO_DSF_FRIR_SERVER_FQDN/fhir</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       ORG_HIGHMED_DSF_BPE_PROCESS_EXCLUDED: |</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        highmedorg_computeFeasibility/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        highmedorg_computeDataSharing/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        highmedorg_updateAllowList/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        wwwnetzwerk-universitaetsmedizinde_dataTranslate/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">-        wwwnetzwerk-universitaetsmedizinde_dataReceive/0.6.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        highmedorg_computeFeasibility/0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        highmedorg_computeDataSharing/0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        highmedorg_updateAllowList/0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        wwwnetzwerk-universitaetsmedizinde_dataTranslate/0.7.0</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+        wwwnetzwerk-universitaetsmedizinde_dataReceive/0.7.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       #TODO modify ORG_HIGHMED_DSF_BPE_PROCESS_EXCLUDED for later process versions</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">       #TODO add process specific environment variables, see process documentation</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>Upgrade DSF Plugins and Process-Plugins</p><ul><li><strong>NUM-CODEX</strong> (non HiGHmed) instance: <ul><li><p>Process plugins in <code>/opt/bpe/process</code>:</p><ol><li>Replace <code>codex-process-data-transfer-0.6.0.jar</code> with <code>codex-process-data-transfer-0.7.0.jar</code> from the <a href="https://github.com/num-codex/codex-processes-ap1/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">latest NUM-CODEX processes release</a></li><li>Replace <code>dsf-bpe-process-ping-0.6.0.jar</code> with <code>dsf-bpe-process-ping-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li></ol><p>Make sure the process plugins in <code>/opt/bpe/process</code> are configured with <code>chmod 440</code> and <code>chown root:bpe</code>.</p></li></ul></li><li><strong>HiGHmed</strong> instance: <ul><li><p>Process plugins in <code>/opt/bpe/process</code>:</p><ol><li>Replace <code>codex-process-data-transfer-0.6.0.jar</code> with <code>codex-process-data-transfer-0.7.0.jar</code> from the <a href="https://github.com/num-codex/codex-processes-ap1/releases/tag/v0.7.0" target="_blank" rel="noopener noreferrer">latest NUM-CODEX processes release</a></li><li>Replace <code>dsf-bpe-process-data-sharing-0.6.0.jar</code> with <code>dsf-bpe-process-data-sharing-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li><li>Replace <code>dsf-bpe-process-feasibility-0.6.0.jar</code> with <code>dsf-bpe-process-feasibility-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li><li>Replace <code>dsf-bpe-process-feasibility-mpc-0.6.0.jar</code> with <code>dsf-bpe-process-feasibility-mpc-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li><li>Replace <code>dsf-bpe-process-local-services-0.6.0.jar</code> with <code>dsf-bpe-process-local-services-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li><li>Replace <code>dsf-bpe-process-ping-0.6.0.jar</code> with <code>dsf-bpe-process-ping-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li><li>Replace <code>dsf-bpe-process-update-allow-list-0.6.0.jar</code> with <code>dsf-bpe-process-update-allow-list-0.7.0.jar</code> from the <a href="https://github.com/highmed/highmed-processes/tree/v0.7.0" target="_blank" rel="noopener noreferrer">latest HiGHmed processes release</a></li></ol><p>Make sure the process plugins in <code>/opt/bpe/process</code> are configured with <code>chmod 440</code> and <code>chown root:bpe</code>.</p></li><li><p>Plugins in &#39;/opt/bpe/plugin&#39;:</p><ol><li>If you are using the provided PDQ MPI Client, replace <code>dsf-mpi-client-pdq-0.7.0.jar</code>, <code>hapi-base-2.3.jar</code> and <code>hapi-structures-v25-2.3.jar</code> with the new files from <code>dsf-mpi-client-pdq-0.9.0.zip</code>, see <a href="https://github.com/highmed/highmed-dsf/releases/tag/v0.9.0" target="_blank" rel="noopener noreferrer">DSF release notes</a></li><li>If you are using the provided openEHR Client, replace <code>dsf-openehr-client-impl-0.7.0.jar</code> with the new file from <code>dsf-openehr-client-impl-0.9.0.zip</code>, see <a href="https://github.com/highmed/highmed-dsf/releases/tag/v0.9.0" target="_blank" rel="noopener noreferrer">DSF release notes</a></li></ol><p>Make sure the plugins in <code>/opt/bpe/plugin</code> are configured with <code>chmod 440</code> and <code>chown root:bpe</code>.</p></li></ul></li></ul></li><li><p>Upgrade the DSF BPE containers<br> From <code>/opt/bpe</code> execute</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up -d &amp;&amp; docker-compose logs -f</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Verify your upgrade:</p><ul><li>Verify the DSF FHIR server is running in version 0.9.0. The log should contain a message:<br><code>INFO main - BuildInfoReaderImpl.logBuildInfo(137) | Artifact: dsf-fhir-server-jetty, version: 0.9.0, [...]</code></li><li>Verify the DSF FHIR server started without errors</li><li>Verify the DSF FHIR server is accessible via https, for example by browsing to <a href="https://your-dsf-endpoint.de/fhir/" target="_blank" rel="noopener noreferrer">https://your-dsf-endpoint.de/fhir/</a> (authentication with your client-certificate)</li><li>Verify the DSF BPE server is running in version 0.9.0. The log should contain a message:<br><code>INFO main - BuildInfoReaderImpl.logBuildInfo(137) | Artifact: dsf-bpe-server-jetty, version: 0.9.0, [...]</code></li><li>Verify the DSF BPE server started without errors</li><li>Verify the DSF BPE server removed ActivityDefinition resources for the deleted process plugin from the DSF FHIR server and created new ActivityDefinition for the new process plugin.</li><li>Verify your install with a ping/pong test<br> For a Task resource compatible with the 0.7.0 release of the ping process, see the <a href="https://github.com/highmed/highmed-processes/wiki/Process-Ping-Start-v0.7.0" target="_blank" rel="noopener noreferrer">Ping/Pong process wiki</a>.</li></ul></li></ol>`,6)]))}const h=s(r,[["render",l],["__file","upgradeFrom7.html.vue"]]),o=JSON.parse('{"path":"/oldstable/releases/upgradeFrom7.html","title":"Upgrading from 0.7.0 to 0.9.0","lang":"en-US","frontmatter":{"title":"Upgrading from 0.7.0 to 0.9.0","icon":"install","gitInclude":[]},"headers":[{"level":2,"title":"Modify DSF FHIR Server Setup","slug":"modify-dsf-fhir-server-setup","link":"#modify-dsf-fhir-server-setup","children":[]},{"level":2,"title":"Modify DSF BPE Server Setup","slug":"modify-dsf-bpe-server-setup","link":"#modify-dsf-bpe-server-setup","children":[]}],"readingTime":{"minutes":3.63,"words":1088},"filePathRelative":"oldstable/releases/upgradeFrom7.md","excerpt":"<p>Upgrading the DSF from 0.7.0 to 0.9.0 involves replacing a config file, modifying the docker-compose.yml files, replacing the process plugins and recreating the containers.</p>\\n<p><strong>If you are upgrading from 0.6.0 please see the <a href=\\"https://github.com/highmed/highmed-dsf/wiki/DSF-Upgrade-From-0.6.0-to-0.7.0\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Upgrade from 0.6.0 to 0.7.0 guide</a> first.</strong></p>"}');export{h as comp,o as data};
