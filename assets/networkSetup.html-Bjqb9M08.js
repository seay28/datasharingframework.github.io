import{_ as n,a as s}from"./highmed_dsf_network_setup_ext_dmz-DyQZOoIs.js";import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a as r,o as t}from"./app-CJIENTLq.js";const l={};function o(p,e){return t(),i("div",null,e[0]||(e[0]=[r('<p>The Data Sharing Framework consists of two components: A FHIR Endpoint Server used to except Task resources and provide resources for download by other organizations and a Business Process Engine Server run internal and not accessible by other organization to execute and coordinate processes.</p><figure><img src="'+n+'" alt="Network Setup Diagramm" tabindex="0" loading="lazy"><figcaption>Network Setup Diagramm</figcaption></figure><ul><li>FHIR Reverse Proxy: The FHIR Reverse Proxy is used to terminate incoming https connections to the FHIR App Server. The Reverse Proxy needs to be accessible on port 443 from the internet. Incoming https connection will be delegate as http on a docker internal network to the FHIR App Server.</li><li>FHIR App Server: The FHIR App Server is used as a FHIR Endpoint for incoming Task resources and providing resources for download by other organizations. In order to validate incoming FHIR resources the server will communicate with FHIR Servers at other organizations. Access to resources and authorization for creating or updating resources is granted based on the content of the resource and/or based on the client (identified by its client certificate) being part of an allow list. JDBC connections to the FHIR DB Server</li><li>FHIR DB Server: PostgreSQL database for the FHIR App Server.</li><li>BPE App Server: The BPE App Server is executing BPMN 2.0 business processes with the included business process engine. Automatic BPMN service tasks are used for example to check resource, access the PDP- and MPI-servers as well as the MDAT repository. The calculation of record linkage bit vectors (Record Bloom Filters) is also performed using an automatic service task. As of version 0.3.0 the BPE server does not provide any webservices for modifying an server resources.</li><li>BPE DB Server: PostgreSQL database for the BPE App Server.</li><li>PDP: IHE Policy Decision Point for deciding on patient consent.</li><li>MDAT Repo: Repository (e.g. openEHR) for storing medical data (MDAT).</li><li>MPI: IHE Master Patient Index for storing identifying patient date (IDAT) e.g. first name, last name, date of birth.</li><li>Cohort Browser: Example for a system to trigger patient cohort size estimations across multiple organizations.</li></ul><p>More information on Client- and Server-Certificates are available on the dedicated wiki page: <a href="Authentication">Authentication: Client/Server Certificates</a></p><h2 id="additional-reverse-proxy-in-external-dmz" tabindex="-1"><a class="header-anchor" href="#additional-reverse-proxy-in-external-dmz"><span>Additional Reverse Proxy in external DMZ</span></a></h2><p>In some organizations an additional reverse proxy in an external DMZ is needed. This can be accomplished by using for example nginx or haproxy as a TCP-Proxy. Example configurations routing traffic using SNI can be found below. Configuring an additional reverse proxy to terminate the incoming TLS connection early is not recommended.</p><figure><img src="'+s+`" alt="Network Setup Diagramm" tabindex="0" loading="lazy"><figcaption>Network Setup Diagramm</figcaption></figure><p><strong>nginx</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>http {</span></span>
<span class="line"><span>	# ...</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>stream {</span></span>
<span class="line"><span>	map $ssl_preread_server_name $name {</span></span>
<span class="line"><span>		fhir.example.com fhir;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	upstream fhir {</span></span>
<span class="line"><span>		server 192.168.0.1:443;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	server {</span></span>
<span class="line"><span>		listen 443;</span></span>
<span class="line"><span>		proxy_pass $name;</span></span>
<span class="line"><span>		ssl_preread on;</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>haproxy</strong></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>defaults</span></span>
<span class="line"><span>	timeout connect 5s</span></span>
<span class="line"><span>	timeout client 30s</span></span>
<span class="line"><span>	timeout server 30s</span></span>
<span class="line"><span></span></span>
<span class="line"><span>frontend ingress</span></span>
<span class="line"><span>	bind :443</span></span>
<span class="line"><span>	mode tcp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	tcp-request inspect-delay 5s</span></span>
<span class="line"><span>	tcp-request content accept if { req_ssl_hello_type 1 }</span></span>
<span class="line"><span>	use_backend fhir if { req.ssl_sni fhir.example.com }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>backend fhir</span></span>
<span class="line"><span>	mode tcp</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	server fhir 192.168.0.1:443</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)]))}const m=a(l,[["render",o],["__file","networkSetup.html.vue"]]),u=JSON.parse('{"path":"/oldstable/generalinformation/networkSetup.html","title":"Network Setup and General Architecture","lang":"en-US","frontmatter":{"title":"Network Setup and General Architecture","icon":"customize","gitInclude":[]},"headers":[{"level":2,"title":"Additional Reverse Proxy in external DMZ","slug":"additional-reverse-proxy-in-external-dmz","link":"#additional-reverse-proxy-in-external-dmz","children":[]}],"readingTime":{"minutes":1.62,"words":486},"filePathRelative":"oldstable/generalinformation/networkSetup.md","excerpt":"<p>The Data Sharing Framework consists of two components: A FHIR Endpoint Server used to except Task resources and provide resources for download by other organizations and a Business Process Engine Server run internal and not accessible by other organization to execute and coordinate processes.</p>"}');export{m as comp,u as data};
