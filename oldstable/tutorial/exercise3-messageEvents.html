<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.17" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.58" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="icon" href="/photos/home/logo-small.svg"><title>Exercise 3 - Message Events</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-BcLlt20R.css" as="style"><link rel="stylesheet" href="/assets/style-BcLlt20R.css">
    <link rel="modulepreload" href="/assets/app-CJIENTLq.js"><link rel="modulepreload" href="/assets/exercise3-messageEvents.html-C6LoIiwp.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="Take me home"><img class="vp-nav-logo" src="/photos/home/logo-small.svg" alt><!----><!----></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><span class="font-icon icon iconfont icon-home" style=""></span><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Docs"><!--[--><span class="font-icon icon iconfont icon-info" style=""></span>Docs<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Introduction</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/intro/info/introduction.html" aria-label="Introduction"><!--[--><span class="font-icon icon iconfont icon-customize" style=""></span><!--]-->Introduction<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/intro/use-cases/" aria-label="Use-Cases"><!--[--><span class="font-icon icon iconfont icon-view" style=""></span><!--]-->Use-Cases<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/intro/publications.html" aria-label="Publications and Talks"><!--[--><span class="font-icon icon iconfont icon-blog" style=""></span><!--]-->Publications and Talks<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/intro/tutorials/" aria-label="Tutorials"><!--[--><span class="font-icon icon iconfont icon-edit" style=""></span><!--]-->Tutorials<!----></a></li></ul></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/security/" aria-label="Security"><!--[--><span class="font-icon icon iconfont icon-safe" style=""></span><!--]-->Security<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Get Started"><!--[--><span class="font-icon icon iconfont icon-launch" style=""></span>Get Started<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Guideline v1.7.1 (stable)</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/" aria-label="DSF 1.7.1"><!--[--><span class="font-icon icon iconfont icon-guide" style=""></span><!--]-->DSF 1.7.1<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/maintain/install.html" aria-label="Install DSF 1.7.1"><!--[--><span class="font-icon icon iconfont icon-install" style=""></span><!--]-->Install DSF 1.7.1<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/maintain/upgrade-from-0.html" aria-label="Upgrade from DSF 0.9.x"><!--[--><span class="font-icon icon iconfont icon-update" style=""></span><!--]-->Upgrade from DSF 0.9.x<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/maintain/allowList-mgm.html" aria-label="Allow List Management"><!--[--><span class="font-icon icon iconfont icon-share" style=""></span><!--]-->Allow List Management<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/maintain/install-plugins.html" aria-label="Install Plugins"><!--[--><span class="font-icon icon iconfont icon-plugin" style=""></span><!--]-->Install Plugins<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/develop/create.html" aria-label="Create a new process plugin"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->Create a new process plugin<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/stable/contribute/" aria-label="Contribute"><!--[--><span class="font-icon icon iconfont icon-info" style=""></span><!--]-->Contribute<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="About"><!--[--><span class="font-icon icon iconfont icon-creative" style=""></span>About<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Learn More</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/about/learnmore/contact.html" aria-label="Contact &amp; Community"><!--[--><span class="font-icon icon iconfont icon-call" style=""></span><!--]-->Contact &amp; Community<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/about/learnmore/team.html" aria-label="Team"><!--[--><span class="font-icon icon iconfont icon-group" style=""></span><!--]-->Team<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/about/learnmore/partners.html" aria-label="Partners"><!--[--><span class="font-icon icon iconfont icon-proxy" style=""></span><!--]-->Partners<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/about/learnmore/public.html" aria-label="Public Funding"><!--[--><span class="font-icon icon iconfont icon-free" style=""></span><!--]-->Public Funding<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Versions"><!--[--><span class="font-icon icon iconfont icon-note" style=""></span>Versions<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/stable/" aria-label="v1.7.1 (stable)"><!---->v1.7.1 (stable)<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.7.0/" aria-label="v1.7.0"><!---->v1.7.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.6.0/" aria-label="v1.6.0"><!---->v1.6.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.5.2/" aria-label="v1.5.2"><!---->v1.5.2<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.5.1/" aria-label="v1.5.1"><!---->v1.5.1<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.5.0/" aria-label="v1.5.0"><!---->v1.5.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.4.0/" aria-label="v1.4.0"><!---->v1.4.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.3.2/" aria-label="v1.3.2"><!---->v1.3.2<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.3.1/" aria-label="v1.3.1"><!---->v1.3.1<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.3.0/" aria-label="v1.3.0"><!---->v1.3.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.2.0/" aria-label="v1.2.0"><!---->v1.2.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.1.0/" aria-label="v1.1.0"><!---->v1.1.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/v1.0.0/" aria-label="v1.0.0"><!---->v1.0.0<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/oldstable/" aria-label="v0.9.3 (archived)"><!---->v0.9.3 (archived)<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="auto-link external-link" href="https://github.com/datasharingframework/dsf" aria-label rel="noopener noreferrer" target="_blank"><!--[--><span class="font-icon icon iconfont icon-github" style=""></span><!--]--><!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:none;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:block;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="Home"><!--[--><span class="font-icon icon iconfont icon-home" style=""></span><!--]-->Home<!----></a></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><span class="font-icon icon iconfont icon-guide" style=""></span><span class="vp-sidebar-title">Version 0.9.x</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/oldstable/introduction.html" aria-label="Introduction"><!--[--><span class="font-icon icon iconfont icon-info" style=""></span><!--]-->Introduction<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/oldstable/generalinformation/" aria-label="General Information"><!--[--><span class="font-icon icon iconfont icon-set" style=""></span><!--]-->General Information<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/oldstable/code/" aria-label="Code"><!--[--><span class="font-icon icon iconfont icon-code" style=""></span><!--]-->Code<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/oldstable/build/" aria-label="Build and Test"><!--[--><span class="font-icon icon iconfont icon-back-stage" style=""></span><!--]-->Build and Test<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/oldstable/releases/" aria-label="Releases and Deployment"><!--[--><span class="font-icon icon iconfont icon-install" style=""></span><!--]-->Releases and Deployment<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/oldstable/tutorial/" aria-label="DSF Process Plugin Tutorial"><!--[--><span class="font-icon icon iconfont icon-slides" style=""></span><!--]-->DSF Process Plugin Tutorial<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-slides" style=""></span>Exercise 3 - Message Events</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorðŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/about/learnmore/team.html" target="_blank" rel="noopener noreferrer">DSF-Team</a></span><span property="author" content="DSF-Team"></span></span><!----><!----><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 6 min</span><meta property="timeRequired" content="PT6M"></span><!----><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#exercise-3-message-events">Exercise 3 - Message Events</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#introduction">Introduction</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#exercise-tasks">Exercise Tasks</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#solution-verification">Solution Verification</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><p><a class="route-link" href="/oldstable/tutorial/prerequisites.html">Prerequisites</a> | <a class="route-link" href="/oldstable/tutorial/exercise1-simpleProcess.html">Exercise 1</a> | <a class="route-link" href="/oldstable/tutorial/exercise11-processDebugging.html">Exercise 1.1</a> | <a class="route-link" href="/oldstable/tutorial/exercise2-inputParameters.html">Exercise 2</a> | Exercise 3 | <a class="route-link" href="/oldstable/tutorial/exercise4-exclusiveGateways.html">Exercise 4</a> | <a class="route-link" href="/oldstable/tutorial/exercise5-eventBasedGateways.html">Exercise 5</a></p><h2 id="exercise-3-message-events" tabindex="-1"><a class="header-anchor" href="#exercise-3-message-events"><span>Exercise 3 - Message Events</span></a></h2><p>Communication between organizations is modeled using message flow in BPMN processes. The third exercise shows how a process at one organization can trigger a process at another organization.</p><p>To demonstrate communication between two organizations we will configure message flow between the processes <code>highmedorg_helloDic</code> and <code>highmedorg_helloCos</code>. The processes are then to be executed at the organizations <code>Test_DIC</code> and <code>Test_COS</code> respectively in the docker test setup, with the former triggering execution of the latter by automatically sending a <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> from organization <code>Test_DIC</code> to organization <code>Test_COS</code>.</p><h3 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h3><hr><h4 id="message-flow-and-fhir-task-resources" tabindex="-1"><a class="header-anchor" href="#message-flow-and-fhir-task-resources"><span>Message Flow and FHIR Task resources</span></a></h4><p>BPMN processes are instantiated and started within the DSF by creating a matching FHIR <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> resource in the DSF FHIR server. This is true for executing a process on the local DSF BPE server by manually creating a <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> resource, but also works by creating and starting a process instance at a remote DSF BPE server from an executing process automatically.</p><p>In order to exchange information between different processes, for example at two different organizations, BPMN message flow is used. Typically represented by a dashed line arrow between elements with black (send) and white (receive) envelop icons. The following BPMN collaboration diagram shows two processes. The process at &quot;Organization 1&quot; is sending a message to &quot;Organization 2&quot; which results in the instantiation and execution of new process instance at the second organization.</p><figure><img src="/photos/guideline/tutorial/ex3.png" alt="Message Flow" tabindex="0" loading="lazy"><figcaption>Message Flow</figcaption></figure><p>Every time message flow is used in a BPMN process for the DSF, a corresponding FHIR <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> profile needs to be specified for every interaction. This profile specifies which process should be started or continued and what the message name is when correlating the appropriate <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-start-event" target="_blank" rel="noopener noreferrer">Message Start Event</a> or <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-intermediate-catching-event" target="_blank" rel="noopener noreferrer">Intermediate Message Catch Event</a>. A <em>Business Key</em> and a <em>Correlation Key</em> are specified if different process instances need to be linked to a single execution, for example to be able to send a message back.</p><h4 id="bpmn-process-definition-key-vs-fhir-task-instantiatesuri-and-activitydefinition-url-version" tabindex="-1"><a class="header-anchor" href="#bpmn-process-definition-key-vs-fhir-task-instantiatesuri-and-activitydefinition-url-version"><span>BPMN Process Definition Key vs. FHIR Task.instantiatesUri and ActivityDefinition.url / version</span></a></h4><p>FHIR ActivityDefinition resources are used to announce what processes can be instantiated at a given DSF instance. They also control what kind of organization can request the instantiation or continuation of a process instance and what kind of organization is allowed to fulfill the request.</p><p>In order to link the FHIR and BPMN worlds the BPMN process definition key needs to be specified following the pattern <code>^[-a-zA-Z0-9]+_[-a-zA-Z0-9]+$</code> for example:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>domainorg_processKey</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>In addition the BPM process needs to specify a process version with the pattern <code>^\d+.\d+.\d+$</code> for example:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>1.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This results in a canonical URL used to identify the process, for example:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>http://domain.org/bpe/Process/processKey/1.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The canonical URL is used for <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task.instantiatesUri</a> and <a href="http://hl7.org/fhir/R4/activitydefinition.html" target="_blank" rel="noopener noreferrer">ActivityDefinition.url / version</a>.</p><h4 id="activitydefinitions-for-the-dsf" tabindex="-1"><a class="header-anchor" href="#activitydefinitions-for-the-dsf"><span>ActivityDefinitions for the DSF</span></a></h4><p>FHIR <a href="http://hl7.org/fhir/R4/activitydefinition.html" target="_blank" rel="noopener noreferrer">ActivityDefinition</a> resources are used to announce what processes can be instantiated at a given DSF instance and contain the authorization rules for the specified process. <a href="http://hl7.org/fhir/R4/activitydefinition.html" target="_blank" rel="noopener noreferrer">ActivityDefinition</a> for the DSF need to comply with the <a href="http://highmed.org/fhir/StructureDefinition/activity-definition" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/activity-definition</a> profile, with authorization rules configured using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization</a> extension.</p><p>The authorization extension needs to be configured at least once and has four sub extensions:</p><h5 id="message-name-1-1" tabindex="-1"><a class="header-anchor" href="#message-name-1-1"><span>message-name [1..1]</span></a></h5><p>String value specifying the message name of <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-start-event" target="_blank" rel="noopener noreferrer">Message Start Event</a>, <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-intermediate-catching-event" target="_blank" rel="noopener noreferrer">Intermediate Message Catch Event</a> or <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/tasks/receive-task/" target="_blank" rel="noopener noreferrer">Message Receive Task</a> this authorization rule should match. Can only be specified once per authorization rule extension.</p><h5 id="task-profile-1-1" tabindex="-1"><a class="header-anchor" href="#task-profile-1-1"><span>task-profile [1..1]</span></a></h5><p>Canonical URL value specifying the <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> profile this authorization rule should match. Can only be specified once per authorization rule extension.</p><h5 id="requester-1" tabindex="-1"><a class="header-anchor" href="#requester-1"><span>requester [1..]</span></a></h5><p>Coding value matching entries from the <a href="http://highmed.org/fhir/ValueSet/process-authorization-requester" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/ValueSet/process-authorization-requester</a> ValueSet:</p><ul><li><p>LOCAL_ORGANIZATION A local organization with a specific identifier. The organization identifier needs to specified using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization</a> extension.</p></li><li><p>REMOTE_ORGANIZATION A remote (non local) organization with a specific identifier. The organization identifier needs to specified using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization</a> extension.</p></li><li><p>LOCAL_ROLE A local organizations with a specific role defined via <a href="http://hl7.org/fhir/R4/organizationaffiliation.html" target="_blank" rel="noopener noreferrer">OrganizationAffiliation</a>. Role and consortium identifier need to be specified using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization-consortium-role" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization-consortium-role</a> extension.</p></li><li><p>REMOTE_ROLE A remote (non local) organizations with a specific role defined via <a class="route-link" href="/oldstable/tutorial/hl7.org/fhir/R4/organizationaffiliation.html">OrganizationAffiliation</a>. Role and consortium identifier need to be specified using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization-consortium-role" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization-consortium-role</a> extension.</p></li><li><p>LOCAL_ALL All local organizations regardless of their identifier or role in a consortium.</p></li><li><p>REMOTE_ALL All remote (non local) organizations regardless of their identifier or role in a consortium.</p></li></ul><h5 id="recipient-1" tabindex="-1"><a class="header-anchor" href="#recipient-1"><span>recipient [1..]</span></a></h5><p>Coding value matching entries from the <a href="http://highmed.org/fhir/ValueSet/process-authorization-recipient" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/ValueSet/process-authorization-recipient</a> ValueSet.</p><ul><li><p>LOCAL_ORGANIZATION Organization with a specific identifier. The organization identifier needs to specified using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization</a> extension.</p></li><li><p>LOCAL_ROLE Organizations with a specific role defined via <a href="http://hl7.org/fhir/R4/organizationaffiliation.html" target="_blank" rel="noopener noreferrer">OrganizationAffiliation</a>. Role and consortium identifier need to be specified using the <a href="http://highmed.org/fhir/StructureDefinition/extension-process-authorization-consortium-role" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/extension-process-authorization-consortium-role</a> extension.</p></li><li><p>LOCAL_ALL All organizations regardless of their identifier or role in a consortium.</p></li></ul><p>The local organization of a DSF instance is configured using the environment variables <a href="https://github.com/highmed/highmed-dsf/wiki/DSF-0.7.0-Configuration-Parameters-FHIR#org_highmed_dsf_fhir_server_organization_identifier_value" target="_blank" rel="noopener noreferrer">ORG_HIGHMED_DSF_FHIR_SERVER_ORGANIZATION_IDENTIFIER_VALUE</a> for the DSF FHIR server and <a href="https://github.com/highmed/highmed-dsf/wiki/DSF-0.7.0-Configuration-Parameters-BPE#org_highmed_dsf_bpe_fhir_server_organization_identifier_value" target="_blank" rel="noopener noreferrer">ORG_HIGHMED_DSF_BPE_FHIR_SERVER_ORGANIZATION_IDENTIFIER_VALUE</a> for the DSF BPE server.</p><h4 id="authorization-extension-example" tabindex="-1"><a class="header-anchor" href="#authorization-extension-example"><span>Authorization Extension Example</span></a></h4><p>The following example specifies that process execution can only be requested by a organization with a specific identifier and only allows execution of the process in the DSF instance of an organization with a specific identifier.</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/fhir/StructureDefinition/extension-process-authorization&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;message-name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueString</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;some-message-name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;task-profile&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueCanonical</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://foo.org/fhir/StructureDefinition/profile|#{version}&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;requester&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueCoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueIdentifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">					&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/sid/organization-identifier&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">					&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;identifier.remote.org&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueIdentifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/fhir/CodeSystem/process-authorization&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;REMOTE_ORGANIZATION&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueCoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;recipient&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueCoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> url</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/fhir/StructureDefinition/extension-process-authorization-organization&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueIdentifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">					&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/sid/organization-identifier&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">					&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">value</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;identifier.local.org&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">				&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueIdentifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;http://highmed.org/fhir/CodeSystem/process-authorization&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">			&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">code</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;LOCAL_ORGANIZATION&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">		&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">valueCoding</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">	&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="exercise-tasks" tabindex="-1"><a class="header-anchor" href="#exercise-tasks"><span>Exercise Tasks</span></a></h3><hr><ol><li>Modify the <code>highmedorg_helloDic</code> process in the <code>hello-dic.bpmn</code> file and replace the <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/none-events/#none-end-event" target="_blank" rel="noopener noreferrer">End Event</a> with a <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-end-event" target="_blank" rel="noopener noreferrer">Message End Event</a>. Configure input parameters <code>instantiatesUri</code>, <code>profile</code> and <code>messageName</code> in the BPMN model for the <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-end-event" target="_blank" rel="noopener noreferrer">Message End Event</a>. Set the message name of the <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-end-event" target="_blank" rel="noopener noreferrer">Message End Event</a> and configure it to be executed using the HelloCosMessage class.<br> Use <a href="http://highmed.org/fhir/StructureDefinition/task-hello-cos%7C#%7Bversion%7D" target="_blank" rel="noopener noreferrer">http://highmed.org/fhir/StructureDefinition/task-hello-cos|#{version}</a> as the profile and <code>helloCos</code> as the message name. Figure out what the appropriate <code>instantiatesUri</code> value is, based on the name (process definition key) of the process to be triggered.</li><li>Modify the <code>highmedorg_helloCos</code> process in the <code>hello-cos.bpmn</code> file and configure the message name of the <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-start-event" target="_blank" rel="noopener noreferrer">Message Start Event</a> with the same value as the message name of the <a href="https://docs.camunda.org/manual/7.17/reference/bpmn20/events/message-events/#message-end-event" target="_blank" rel="noopener noreferrer">Message End Event</a> in the <code>highmedorg_helloDic</code> process.</li><li>Create a new <a href="http://hl7.org/fhir/R4/structuredefinition.html" target="_blank" rel="noopener noreferrer">StructureDefinition</a> with a <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> profile for the <code>helloCos</code> message.</li><li>Create a new <a href="http://hl7.org/fhir/R4/activitydefinition.html" target="_blank" rel="noopener noreferrer">ActivityDefinition</a> resource for the <code>highmedorg_helloCos</code> process and configure the authorization extension to allow the <code>Test_DIC</code> organization as the requester and the <code>Test_COS</code> organization as the recipient.</li><li>Add the <code>highmedorg_helloCos</code> process and its resources to the <code>TutorialProcessPluginDefinition</code> class.</li><li>Modify <code>HelloDic</code> service class to set the <code>target</code> process variable for the <code>Test_COS</code> organization.</li><li>Configure the <code>HelloCosMessage</code> class as a spring in the <code>TutorialConfig</code> class.</li></ol><h3 id="solution-verification" tabindex="-1"><a class="header-anchor" href="#solution-verification"><span>Solution Verification</span></a></h3><hr><h4 id="maven-build-and-automated-tests" tabindex="-1"><a class="header-anchor" href="#maven-build-and-automated-tests"><span>Maven Build and Automated Tests</span></a></h4><p>Execute a maven build of the <code>dsf-process-tutorial</code> parent module via:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mvn clean install -Pexercise-3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Verify that the build was successful and no test failures occurred.</p><h4 id="process-execution-and-manual-tests" tabindex="-1"><a class="header-anchor" href="#process-execution-and-manual-tests"><span>Process Execution and Manual Tests</span></a></h4><p>To verify the <code>highmedorg_helloDic</code> and <code>highmedorg_helloCos</code> processes can be executed successfully, we need to deploy them into DSF instances and execute the <code>highmedorg_helloDic</code> process. The maven <code>install</code> build is configured to create a process jar file with all necessary resources and copy the jar to the appropriate locations of the docker test setup.</p><ol><li>Start the DSF FHIR server for the <code>Test_DIC</code> organization in a console at location <code>.../dsf-process-tutorial/test-setup</code>:</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up dic-fhir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Verify the DSF FHIR server started successfully.</p><ol start="2"><li>Start the DSF BPE server for the <code>Test_DIC</code> organization in another console at location <code>.../dsf-process-tutorial/test-setup</code>:</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up dic-bpe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Verify the DSF BPE server started successfully and deployed the highmedorg_helloDic process.</p><ol start="3"><li>Start the DSF FHIR server for the <code>Test_COS</code> organization in a console at location <code>.../dsf-process-tutorial/test-setup</code>:</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up cos-fhir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Verify the DSF FHIR server started successfully. You can access the webservice of the DSF FHIR server at <a href="https://cos/fhir" target="_blank" rel="noopener noreferrer">https://cos/fhir</a>.<br> The DSF FHIR server uses a server certificate that was generated during the first maven build. To authenticate yourself to the server you can use the client certificate located at <code>.../dsf-process-tutorial/test-data-generator/cert/Webbrowser_Test_User/Webbrowser_Test_User_certificate.p12</code> (Password: password).</p><ol start="4"><li>Start the DSF BPE server for the <code>Test_COS</code> organization in another console at location <code>.../dsf-process-tutorial/test-setup</code>:</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>docker-compose up cos-bpe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Verify the DSF BPE server started successfully and deployed the <code>highmedorg_helloCos</code> process. The DSF BPE server should print a message that the process was deployed. The DSF FHIR server should now have a new <a href="http://hl7.org/fhir/R4/activitydefinition.html" target="_blank" rel="noopener noreferrer">ActivityDefinition</a> resource. Go to <a href="https://cos/fhir/ActivityDefinition" target="_blank" rel="noopener noreferrer">https://cos/fhir/ActivityDefinition</a> to check if the expected resource was created by the BPE while deploying the process. The returned FHIR <a href="http://hl7.org/fhir/R4/bundle.html" target="_blank" rel="noopener noreferrer">Bundle</a> should contain two <a href="http://hl7.org/fhir/R4/activitydefinition.html" target="_blank" rel="noopener noreferrer">ActivityDefinition</a> resources. Also, go to <a href="https://cos/fhir/StructureDefinition?url=http://highmed.org/fhir/StructureDefinition/task-hello-cos" target="_blank" rel="noopener noreferrer">https://cos/fhir/StructureDefinition?url=http://highmed.org/fhir/StructureDefinition/task-hello-cos</a> to check if the expected <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> profile was created.</p><ol start="5"><li>Start the <code>highmedorg_helloDic</code> process by posting a specific FHIR <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> resource to the DSF FHIR server of the <code>Test_DIC</code> organization: Execute therefore the <code>main</code> method of the <code>org.highmed.dsf.process.tutorial.TutorialExampleStarter</code> class to create the Task resource needed to start the <code>highmedorg_helloDic</code> process.</li></ol><p>Verify that the FHIR <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> resource was created at the DSF FHIR server and the <code>highmedorg_helloDic</code> process was executed by the DSF BPE server of the <code>Test_DIC</code> organization. The DSF BPE server of the <code>Test_DIC</code> organization should print a message showing that a <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> resource to start the <code>highmedorg_helloCos</code> process was send to the <code>Test_COS</code> organization.<br> Verify that a FHIR <a href="http://hl7.org/fhir/R4/task.html" target="_blank" rel="noopener noreferrer">Task</a> resource was created at the DSF FHIR server of the <code>Test_COS</code> organization and the <code>highmedorg_helloCos</code> process was then executed by the DSF BPE server of the <code>Test_COS</code> organization.</p><p>Continue with <a class="route-link" href="/oldstable/tutorial/exercise4-exclusiveGateways.html">exercise 4</a>.</p><hr><p><a class="route-link" href="/oldstable/tutorial/prerequisites.html">Prerequisites</a> | <a class="route-link" href="/oldstable/tutorial/exercise1-simpleProcess.html">Exercise 1</a> | <a class="route-link" href="/oldstable/tutorial/exercise11-processDebugging.html">Exercise 1.1</a> | <a class="route-link" href="/oldstable/tutorial/exercise2-inputParameters.html">Exercise 2</a> | Exercise 3 | <a class="route-link" href="/oldstable/tutorial/exercise4-exclusiveGateways.html">Exercise 4</a> | <a class="route-link" href="/oldstable/tutorial/exercise5-eventBasedGateways.html">Exercise 5</a></p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer"><a href='https://www.hs-heilbronn.de/impressum'>Imprint</a> â€¢ <a href='https://www.hs-heilbronn.de/de/datenschutz'>Data Privacy</a></div><!----></footer></div><!--]--><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CJIENTLq.js" defer></script>
  </body>
</html>
